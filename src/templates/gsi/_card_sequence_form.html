<div class="row margin-top-15">
    <div class="col-md-2 right">
        <div class="form-group {% if form.name.errors %}has-error{% endif %}">
            <label class="control-label">{{ form.name.label }}*</label>
        </div>
    </div>
    <div class="col-md-4">
        {% if form.name.errors %}
            <b class="error-form">{{ form.name.errors }}</b>
        {% endif %}
        {{ form.name }}
    </div>

    <div class="col-md-2 right">
        <div class="form-group {% if form.content_object.errors %}has-error{% endif %}">
            <label class="control-label">{{ form.environment_base.label }}</label>
        </div>
    </div>
    <div class="col-md-4">
        {% if form.environment_base.errors %}
            <b class="error-form">{{ form.environment_base.errors }}</b>
        {% endif %}
        {{ form.environment_base }}
    </div>
</div>

<div class="row margin-top-15">
    <div class="col-md-2 right">
        <div class="form-group {% if form.environment_override.errors %}has-error{% endif %}">
            <label class="control-label">{{ form.environment_override.label }}</label>
        </div>
    </div>
    <div class="col-md-10">
        {% if form.environment_override.errors %}
            <b class="error-form">{{ form.environment_override.errors }}</b>
        {% endif %}
        {{ form.environment_override }}
    </div>
</div>

<div class="row margin-top-15" id="add_item_order">
    <div class="col-md-2 right" >
        <div class="form-group {% if form.cards.errors %}has-error{% endif %}">
            <label class="control-label">{{ form.card_item.label }}</label>
        </div>
    </div>
    <div class="col-md-4">
        {% if form.card_item.errors %}
            <b class="error-form">{{ form.card_item.errors }}</b>
        {% endif %}
        {{ form.card_item }}
    </div>

    <div class="col-md-2 right">
        <div class="form-group {% if form.order.errors %}has-error{% endif %}">
            <label class="control-label">{{ form.order.label }}</label>
        </div>
    </div>
    <div class="col-md-2">
        {% if form.order.errors %}
            <b class="error-form">{{ form.order.errors }}</b>
        {% endif %}
        {{ form.order }}
    </div>
    <div class="col-md-2">
        <button type="submit" name="add_card_items_button" class="btn btn-primary btn-block">Added</button>
    </div>
</div>

{% if card_sequence_cards %}
<div class="row margin-top-15">
    <div class="col-md-2 right">
        <div class="form-group {% if form.environment_override.errors %}has-error{% endif %}">
            <label class="control-label">Ordered card items</label>
        </div>
    </div>
    <div class="col-md-10">
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Select</th>
                        <th>Card item</th>
                        <th>Order</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for card in card_sequence_cards %}
                        <tr>
                            <td><input type="checkbox" name="cs_select" value="{{ card.id }}"></td>
                            <td>{{ card.card_item }}</td>
                            <td>{{ card.order }}</td>
                            <td>
                                <a class="btn btn-success btn-block"
                                   href="{% if run_id %}
                                            {% if card.card_item.content_type.model == 'qrf' %}
                                                {% url 'cs_runid_csid_qrf_edit' run_id cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'rfscore' %}
                                                {% url 'cs_runid_csid_rfscore_edit' run_id cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'remap' %}
                                                {% url 'cs_runid_csid_remap_edit' run_id cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'yearfilter' %}
                                                {% url 'cs_runid_csid_year_filter_edit' run_id cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'collate' %}
                                                {% url 'cs_runid_csid_collate_edit' run_id cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'preproc' %}
                                                {% url 'cs_runid_csid_preproc_edit' run_id cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'mergecsv' %}
                                                {% url 'cs_runid_csid_mergecsv_edit' run_id cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'rftrain' %}
                                                {% url 'cs_runid_csid_rftrain_edit' run_id cs_id card.card_item.object_id %}
                                            {% endif %}
                                        {% else %}
                                            {% if card.card_item.content_type.model == 'qrf' %}
                                                {% url 'cs_run_csid_qrf_edit' cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'rfscore' %}
                                                {% url 'cs_run_csid_rfscore_edit' cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'remap' %}
                                                {% url 'cs_run_csid_remap_edit' cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'yearfilter' %}
                                                {% url 'cs_run_csid_year_filter_edit' cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'collate' %}
                                                {% url 'cs_run_csid_collate_edit' cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'preproc' %}
                                                {% url 'cs_run_csid_preproc_edit' cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'mergecsv' %}
                                                {% url 'cs_run_csid_mergecsv_edit' cs_id card.card_item.object_id %}
                                            {% elif card.card_item.content_type.model == 'rftrain' %}
                                                {% url 'cs_run_csid_rftrain_edit' cs_id card.card_item.object_id %}
                                            {% endif %}
                                        {% endif %}" role="button">
                                    Edit
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-md-12">
        <div class="col-md-4 col-md-offset-8">
            <button type="submit" name="delete_button" class="btn btn-danger btn-block">
                Delete Card Sequence(s)
            </button>
        </div>
    </div>
</div>
{% endif %}

<div class="row margin-top-50">
    <div class="col-md-2">
        <button type="submit" name="cancel_button" class="btn btn-default btn-block">
            Cancel
        </button>
    </div>
    <div class="col-md-4">
        <button type="submit" name="create_processing_card" class="btn btn-default btn-block">
            Create New Processing Card
        </button>
    </div>
    <div class="col-md-4">
        <button type="submit" name="save_and_continue_editing_button" class="btn btn-primary btn-block">
            Save and continue editing
        </button>
    </div>
    <div class="col-md-2">
        <button type="submit" name="save_button" class="btn btn-primary btn-block">
            Save
        </button>
    </div>
</div>